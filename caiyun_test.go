package colorful_clouds_api

import (
	"encoding/json"
	"os"
	"testing"
)

var token string
var longitudeAndLatitude string
var cyApi ColorfulCloudsApi

func setup() {
	token = os.Getenv("Token")
	longitudeAndLatitude = os.Getenv("LongitudeAndLatitude")

	cyApi = NewColorfulCloudsApi(token, longitudeAndLatitude)
}

func TestNewColorfulCloudsApi(t *testing.T) {
	setup()

	// _ = NewColorfulCloudsApi(token, longitudeAndLatitude)
}

func Test_colorfulCloudsApi_Realtime(t *testing.T) {
	setup()

	// realtime, err := cyApi.Realtime()
	// if err != nil {
	// 	t.Fatal(err)
	// }
	//
	// marshal, err := json.Marshal(realtime)
	// if err != nil {
	// 	t.Fatal(err)
	// }
	// t.Log(string(marshal))

	var realtime RealtimeReply
	tmp := `{"status":"ok","api_version":"v2.5","api_status":"active","lang":"zh_CN","unit":"metric","location":[0.00000,0.000000],"server_time":1610463178,"tzshift":28800,"timezone":"Asia/Shanghai","result":{"realtime":{"status":"ok","temperature":1,"apparent_temperature":-1.3,"pressure":102048.96,"humidity":0.49,"cloudrate":0,"skycon":"CLEAR_NIGHT","visibility":40.05,"dswrf":0,"wind":{"direction":240,"speed":1.8},"precipitation":{"nearest":{"status":"ok","distance":10000,"intensity":0},"local":{"status":"ok","intensity":0,"datasource":"radar"}},"air_quality":{"pm25":46,"pm10":115,"o3":12,"no2":91,"so2":8,"co":1.7,"aqi":{"chn":83,"usa":127},"description":{"chn":"良","usa":"轻度污染"}},"life_index":{"ultraviolet":{"index":0,"desc":"无"},"comfort":{"index":12,"desc":"湿冷"}}},"primary":0}}`
	err := json.Unmarshal([]byte(tmp), &realtime)
	if err != nil {
		t.Fatal(err)
	}

	if realtime.Status != "ok" {
		t.Fatal(`realtime.Status != "ok"`)
	}
	t.Log("当前温度", realtime.Result.Realtime.Temperature, "\b˚")
	t.Log("体感温度", realtime.Result.Realtime.ApparentTemperature, "\b˚")
	t.Log("主要天气现象", realtime.Result.Realtime.Skycon, "")
	t.Log("能见度", realtime.Result.Realtime.Visibility, "\bkm")
	t.Log("风速", realtime.Result.Realtime.Wind.Speed, "\bkm/hr")
	t.Log("最近的降水带距离", realtime.Result.Realtime.Precipitation.Nearest.Distance, "\bkm")
	t.Log("最近的降水带降水强度", realtime.Result.Realtime.Precipitation.Nearest.Intensity, "\bmm/h")
	t.Log("空气质量", realtime.Result.Realtime.AirQuality.Description, "")
	t.Log("紫外线指数", realtime.Result.Realtime.LifeIndex.Ultraviolet, "")
	t.Log("舒适度指数", realtime.Result.Realtime.LifeIndex.Comfort, "")
}

func Test_colorfulCloudsApi_Weather(t *testing.T) {
	setup()

	// weather, err := cyApi.Weather(Alert(true), DailySteps(1), HourlySteps(24))
	// if err != nil {
	// 	t.Fatal(err)
	// }
	//
	// marshal, err := json.Marshal(weather)
	// if err != nil {
	// 	t.Fatal(err)
	// }
	// t.Log(string(marshal))

	var weather WeatherReply
	tmp := `{"status":"ok","api_version":"v2.5","api_status":"active","lang":"zh_CN","unit":"metric","tzshift":28800,"timezone":"Asia/Shanghai","server_time":1610632613,"location":[0.00009,0.000007],"result":{"realtime":{"status":"ok","temperature":10,"humidity":0.73,"cloudrate":0.3,"skycon":"PARTLY_CLOUDY_NIGHT","visibility":15.19,"dswrf":0,"wind":{"speed":0.72,"direction":0},"pressure":101680,"apparent_temperature":9.4,"precipitation":{"local":{"status":"ok","datasource":"radar","intensity":0},"nearest":{"status":"ok","distance":10000,"intensity":0}},"air_quality":{"pm25":47,"pm10":92,"o3":38,"so2":36,"no2":88,"co":0.4,"aqi":{"chn":71,"usa":129},"description":{"chn":"良","usa":"轻度污染"}},"life_index":{"ultraviolet":{"index":0,"desc":"无"},"comfort":{"index":8,"desc":"很冷"}}},"minutely":{"status":"ok","datasource":"radar","precipitation_2h":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"precipitation":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"probability":[0,0,0,0],"description":"未来两小时不会下雨，放心出门吧"},"hourly":{"status":"ok","description":"未来24小时晴","precipitation":[{"datetime":"2021-01-14T21:00+08:00","value":0},{"datetime":"2021-01-14T22:00+08:00","value":0},{"datetime":"2021-01-14T23:00+08:00","value":0},{"datetime":"2021-01-15T00:00+08:00","value":0},{"datetime":"2021-01-15T01:00+08:00","value":0},{"datetime":"2021-01-15T02:00+08:00","value":0},{"datetime":"2021-01-15T03:00+08:00","value":0},{"datetime":"2021-01-15T04:00+08:00","value":0},{"datetime":"2021-01-15T05:00+08:00","value":0},{"datetime":"2021-01-15T06:00+08:00","value":0},{"datetime":"2021-01-15T07:00+08:00","value":0},{"datetime":"2021-01-15T08:00+08:00","value":0},{"datetime":"2021-01-15T09:00+08:00","value":0},{"datetime":"2021-01-15T10:00+08:00","value":0},{"datetime":"2021-01-15T11:00+08:00","value":0},{"datetime":"2021-01-15T12:00+08:00","value":0},{"datetime":"2021-01-15T13:00+08:00","value":0},{"datetime":"2021-01-15T14:00+08:00","value":0},{"datetime":"2021-01-15T15:00+08:00","value":0},{"datetime":"2021-01-15T16:00+08:00","value":0},{"datetime":"2021-01-15T17:00+08:00","value":0},{"datetime":"2021-01-15T18:00+08:00","value":0},{"datetime":"2021-01-15T19:00+08:00","value":0},{"datetime":"2021-01-15T20:00+08:00","value":0}],"temperature":[{"datetime":"2021-01-14T21:00+08:00","value":10},{"datetime":"2021-01-14T22:00+08:00","value":8.87},{"datetime":"2021-01-14T23:00+08:00","value":7.13},{"datetime":"2021-01-15T00:00+08:00","value":6.6},{"datetime":"2021-01-15T01:00+08:00","value":6},{"datetime":"2021-01-15T02:00+08:00","value":6},{"datetime":"2021-01-15T03:00+08:00","value":3},{"datetime":"2021-01-15T04:00+08:00","value":2.5},{"datetime":"2021-01-15T05:00+08:00","value":2},{"datetime":"2021-01-15T06:00+08:00","value":4.8},{"datetime":"2021-01-15T07:00+08:00","value":6.4},{"datetime":"2021-01-15T08:00+08:00","value":8},{"datetime":"2021-01-15T09:00+08:00","value":9.3},{"datetime":"2021-01-15T10:00+08:00","value":10.6},{"datetime":"2021-01-15T11:00+08:00","value":11.9},{"datetime":"2021-01-15T12:00+08:00","value":13.4},{"datetime":"2021-01-15T13:00+08:00","value":15},{"datetime":"2021-01-15T14:00+08:00","value":18},{"datetime":"2021-01-15T15:00+08:00","value":17.8},{"datetime":"2021-01-15T16:00+08:00","value":17.4},{"datetime":"2021-01-15T17:00+08:00","value":16.5},{"datetime":"2021-01-15T18:00+08:00","value":15.2},{"datetime":"2021-01-15T19:00+08:00","value":13.5},{"datetime":"2021-01-15T20:00+08:00","value":12.19}],"wind":[{"datetime":"2021-01-14T21:00+08:00","speed":0.72,"direction":0},{"datetime":"2021-01-14T22:00+08:00","speed":15.36,"direction":163.94},{"datetime":"2021-01-14T23:00+08:00","speed":16.82,"direction":169.2},{"datetime":"2021-01-15T00:00+08:00","speed":15.98,"direction":166.96},{"datetime":"2021-01-15T01:00+08:00","speed":13.87,"direction":173},{"datetime":"2021-01-15T02:00+08:00","speed":10.75,"direction":175.12},{"datetime":"2021-01-15T03:00+08:00","speed":11.56,"direction":166.19},{"datetime":"2021-01-15T04:00+08:00","speed":11.81,"direction":168.66},{"datetime":"2021-01-15T05:00+08:00","speed":8.9,"direction":182.84},{"datetime":"2021-01-15T06:00+08:00","speed":8.68,"direction":194.54},{"datetime":"2021-01-15T07:00+08:00","speed":7.24,"direction":224.54},{"datetime":"2021-01-15T08:00+08:00","speed":7.17,"direction":234.73},{"datetime":"2021-01-15T09:00+08:00","speed":8.71,"direction":241.26},{"datetime":"2021-01-15T10:00+08:00","speed":9.16,"direction":252.24},{"datetime":"2021-01-15T11:00+08:00","speed":8.86,"direction":270.7},{"datetime":"2021-01-15T12:00+08:00","speed":11.16,"direction":289.39},{"datetime":"2021-01-15T13:00+08:00","speed":10.5,"direction":297.36},{"datetime":"2021-01-15T14:00+08:00","speed":10.9,"direction":300.27},{"datetime":"2021-01-15T15:00+08:00","speed":9.47,"direction":292.2},{"datetime":"2021-01-15T16:00+08:00","speed":8.68,"direction":307.52},{"datetime":"2021-01-15T17:00+08:00","speed":9.15,"direction":325.46},{"datetime":"2021-01-15T18:00+08:00","speed":13.93,"direction":3.15},{"datetime":"2021-01-15T19:00+08:00","speed":18.54,"direction":5.02},{"datetime":"2021-01-15T20:00+08:00","speed":20.6,"direction":0.1}],"humidity":[{"datetime":"2021-01-14T21:00+08:00","value":0.73},{"datetime":"2021-01-14T22:00+08:00","value":0.66},{"datetime":"2021-01-14T23:00+08:00","value":0.68},{"datetime":"2021-01-15T00:00+08:00","value":0.69},{"datetime":"2021-01-15T01:00+08:00","value":0.73},{"datetime":"2021-01-15T02:00+08:00","value":0.77},{"datetime":"2021-01-15T03:00+08:00","value":0.79},{"datetime":"2021-01-15T04:00+08:00","value":0.79},{"datetime":"2021-01-15T05:00+08:00","value":0.8},{"datetime":"2021-01-15T06:00+08:00","value":0.78},{"datetime":"2021-01-15T07:00+08:00","value":0.75},{"datetime":"2021-01-15T08:00+08:00","value":0.67},{"datetime":"2021-01-15T09:00+08:00","value":0.56},{"datetime":"2021-01-15T10:00+08:00","value":0.47},{"datetime":"2021-01-15T11:00+08:00","value":0.36},{"datetime":"2021-01-15T12:00+08:00","value":0.3},{"datetime":"2021-01-15T13:00+08:00","value":0.27},{"datetime":"2021-01-15T14:00+08:00","value":0.27},{"datetime":"2021-01-15T15:00+08:00","value":0.27},{"datetime":"2021-01-15T16:00+08:00","value":0.3},{"datetime":"2021-01-15T17:00+08:00","value":0.37},{"datetime":"2021-01-15T18:00+08:00","value":0.49},{"datetime":"2021-01-15T19:00+08:00","value":0.63},{"datetime":"2021-01-15T20:00+08:00","value":0.66}],"cloudrate":[{"datetime":"2021-01-14T21:00+08:00","value":0.3},{"datetime":"2021-01-14T22:00+08:00","value":0.3},{"datetime":"2021-01-14T23:00+08:00","value":0.04},{"datetime":"2021-01-15T00:00+08:00","value":0.03},{"datetime":"2021-01-15T01:00+08:00","value":0.02},{"datetime":"2021-01-15T02:00+08:00","value":0.02},{"datetime":"2021-01-15T03:00+08:00","value":0},{"datetime":"2021-01-15T04:00+08:00","value":0},{"datetime":"2021-01-15T05:00+08:00","value":0},{"datetime":"2021-01-15T06:00+08:00","value":0},{"datetime":"2021-01-15T07:00+08:00","value":0},{"datetime":"2021-01-15T08:00+08:00","value":0},{"datetime":"2021-01-15T09:00+08:00","value":0},{"datetime":"2021-01-15T10:00+08:00","value":0},{"datetime":"2021-01-15T11:00+08:00","value":0},{"datetime":"2021-01-15T12:00+08:00","value":0},{"datetime":"2021-01-15T13:00+08:00","value":0},{"datetime":"2021-01-15T14:00+08:00","value":0},{"datetime":"2021-01-15T15:00+08:00","value":0},{"datetime":"2021-01-15T16:00+08:00","value":0},{"datetime":"2021-01-15T17:00+08:00","value":0},{"datetime":"2021-01-15T18:00+08:00","value":0},{"datetime":"2021-01-15T19:00+08:00","value":0},{"datetime":"2021-01-15T20:00+08:00","value":0}],"skycon":[{"datetime":"2021-01-14T21:00+08:00","value":"PARTLY_CLOUDY_NIGHT"},{"datetime":"2021-01-14T22:00+08:00","value":"PARTLY_CLOUDY_NIGHT"},{"datetime":"2021-01-14T23:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T00:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T01:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T02:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T03:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T04:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T05:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T06:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T07:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T08:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T09:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T10:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T11:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T12:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T13:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T14:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T15:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T16:00+08:00","value":"CLEAR_DAY"},{"datetime":"2021-01-15T17:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T18:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T19:00+08:00","value":"CLEAR_NIGHT"},{"datetime":"2021-01-15T20:00+08:00","value":"CLEAR_NIGHT"}],"pressure":[{"datetime":"2021-01-14T21:00+08:00","value":101680},{"datetime":"2021-01-14T22:00+08:00","value":101738.5231478647},{"datetime":"2021-01-14T23:00+08:00","value":101706.3481043109},{"datetime":"2021-01-15T00:00+08:00","value":101680},{"datetime":"2021-01-15T01:00+08:00","value":101615.8009589946},{"datetime":"2021-01-15T02:00+08:00","value":101600},{"datetime":"2021-01-15T03:00+08:00","value":101535.8009589946},{"datetime":"2021-01-15T04:00+08:00","value":101487.8249564462},{"datetime":"2021-01-15T05:00+08:00","value":101520},{"datetime":"2021-01-15T06:00+08:00","value":101520},{"datetime":"2021-01-15T07:00+08:00","value":101552.0239974517},{"datetime":"2021-01-15T08:00+08:00","value":101600},{"datetime":"2021-01-15T09:00+08:00","value":101680},{"datetime":"2021-01-15T10:00+08:00","value":101712.0239974517},{"datetime":"2021-01-15T11:00+08:00","value":101680},{"datetime":"2021-01-15T12:00+08:00","value":101680},{"datetime":"2021-01-15T13:00+08:00","value":101567.8249564462},{"datetime":"2021-01-15T14:00+08:00","value":101530.5471453164},{"datetime":"2021-01-15T15:00+08:00","value":101520},{"datetime":"2021-01-15T16:00+08:00","value":101600},{"datetime":"2021-01-15T17:00+08:00","value":101680},{"datetime":"2021-01-15T18:00+08:00","value":101813.6518956891},{"datetime":"2021-01-15T19:00+08:00","value":101941.4768521353},{"datetime":"2021-01-15T20:00+08:00","value":102085.6758931408}],"visibility":[{"datetime":"2021-01-14T21:00+08:00","value":15.19},{"datetime":"2021-01-14T22:00+08:00","value":15.16},{"datetime":"2021-01-14T23:00+08:00","value":14.44},{"datetime":"2021-01-15T00:00+08:00","value":13.16},{"datetime":"2021-01-15T01:00+08:00","value":12.27},{"datetime":"2021-01-15T02:00+08:00","value":11.67},{"datetime":"2021-01-15T03:00+08:00","value":11.55},{"datetime":"2021-01-15T04:00+08:00","value":11.8},{"datetime":"2021-01-15T05:00+08:00","value":12.1},{"datetime":"2021-01-15T06:00+08:00","value":11.95},{"datetime":"2021-01-15T07:00+08:00","value":11.54},{"datetime":"2021-01-15T08:00+08:00","value":14.93},{"datetime":"2021-01-15T09:00+08:00","value":19.7},{"datetime":"2021-01-15T10:00+08:00","value":26.7},{"datetime":"2021-01-15T11:00+08:00","value":38.11},{"datetime":"2021-01-15T12:00+08:00","value":46.71},{"datetime":"2021-01-15T13:00+08:00","value":47.61},{"datetime":"2021-01-15T14:00+08:00","value":48.6},{"datetime":"2021-01-15T15:00+08:00","value":48.78},{"datetime":"2021-01-15T16:00+08:00","value":46.42},{"datetime":"2021-01-15T17:00+08:00","value":42.52},{"datetime":"2021-01-15T18:00+08:00","value":38.51},{"datetime":"2021-01-15T19:00+08:00","value":34.24},{"datetime":"2021-01-15T20:00+08:00","value":20.63}],"dswrf":[{"datetime":"2021-01-14T21:00+08:00","value":0},{"datetime":"2021-01-14T22:00+08:00","value":0},{"datetime":"2021-01-14T23:00+08:00","value":0},{"datetime":"2021-01-15T00:00+08:00","value":0},{"datetime":"2021-01-15T01:00+08:00","value":0},{"datetime":"2021-01-15T02:00+08:00","value":0},{"datetime":"2021-01-15T03:00+08:00","value":0},{"datetime":"2021-01-15T04:00+08:00","value":0},{"datetime":"2021-01-15T05:00+08:00","value":0},{"datetime":"2021-01-15T06:00+08:00","value":0},{"datetime":"2021-01-15T07:00+08:00","value":0},{"datetime":"2021-01-15T08:00+08:00","value":10},{"datetime":"2021-01-15T09:00+08:00","value":260},{"datetime":"2021-01-15T10:00+08:00","value":350},{"datetime":"2021-01-15T11:00+08:00","value":427.3153934831},{"datetime":"2021-01-15T12:00+08:00","value":480},{"datetime":"2021-01-15T13:00+08:00","value":511.9751198743},{"datetime":"2021-01-15T14:00+08:00","value":523.2935130389},{"datetime":"2021-01-15T15:00+08:00","value":457.3153934831},{"datetime":"2021-01-15T16:00+08:00","value":370},{"datetime":"2021-01-15T17:00+08:00","value":275.9781195558},{"datetime":"2021-01-15T18:00+08:00","value":210},{"datetime":"2021-01-15T19:00+08:00","value":165.9781195558},{"datetime":"2021-01-15T20:00+08:00","value":140}],"air_quality":{"aqi":[{"datetime":"2021-01-14T21:00+08:00","value":{"chn":71,"usa":71}},{"datetime":"2021-01-14T22:00+08:00","value":{"chn":67,"usa":67}},{"datetime":"2021-01-14T23:00+08:00","value":{"chn":69,"usa":69}},{"datetime":"2021-01-15T00:00+08:00","value":{"chn":70,"usa":70}},{"datetime":"2021-01-15T01:00+08:00","value":{"chn":70,"usa":70}},{"datetime":"2021-01-15T02:00+08:00","value":{"chn":71,"usa":71}},{"datetime":"2021-01-15T03:00+08:00","value":{"chn":71,"usa":71}},{"datetime":"2021-01-15T04:00+08:00","value":{"chn":72,"usa":72}},{"datetime":"2021-01-15T05:00+08:00","value":{"chn":74,"usa":74}},{"datetime":"2021-01-15T06:00+08:00","value":{"chn":76,"usa":76}},{"datetime":"2021-01-15T07:00+08:00","value":{"chn":77,"usa":77}},{"datetime":"2021-01-15T08:00+08:00","value":{"chn":79,"usa":79}},{"datetime":"2021-01-15T09:00+08:00","value":{"chn":80,"usa":80}},{"datetime":"2021-01-15T10:00+08:00","value":{"chn":81,"usa":81}},{"datetime":"2021-01-15T11:00+08:00","value":{"chn":82,"usa":82}},{"datetime":"2021-01-15T12:00+08:00","value":{"chn":82,"usa":82}},{"datetime":"2021-01-15T13:00+08:00","value":{"chn":84,"usa":84}},{"datetime":"2021-01-15T14:00+08:00","value":{"chn":84,"usa":84}},{"datetime":"2021-01-15T15:00+08:00","value":{"chn":84,"usa":84}},{"datetime":"2021-01-15T16:00+08:00","value":{"chn":85,"usa":85}},{"datetime":"2021-01-15T17:00+08:00","value":{"chn":86,"usa":86}},{"datetime":"2021-01-15T18:00+08:00","value":{"chn":87,"usa":87}},{"datetime":"2021-01-15T19:00+08:00","value":{"chn":89,"usa":89}},{"datetime":"2021-01-15T20:00+08:00","value":{"chn":90,"usa":90}}],"pm25":[{"datetime":"2021-01-14T21:00+08:00","value":47},{"datetime":"2021-01-14T22:00+08:00","value":49},{"datetime":"2021-01-14T23:00+08:00","value":50},{"datetime":"2021-01-15T00:00+08:00","value":51},{"datetime":"2021-01-15T01:00+08:00","value":51},{"datetime":"2021-01-15T02:00+08:00","value":52},{"datetime":"2021-01-15T03:00+08:00","value":52},{"datetime":"2021-01-15T04:00+08:00","value":53},{"datetime":"2021-01-15T05:00+08:00","value":54},{"datetime":"2021-01-15T06:00+08:00","value":56},{"datetime":"2021-01-15T07:00+08:00","value":57},{"datetime":"2021-01-15T08:00+08:00","value":58},{"datetime":"2021-01-15T09:00+08:00","value":59},{"datetime":"2021-01-15T10:00+08:00","value":60},{"datetime":"2021-01-15T11:00+08:00","value":61},{"datetime":"2021-01-15T12:00+08:00","value":61},{"datetime":"2021-01-15T13:00+08:00","value":62},{"datetime":"2021-01-15T14:00+08:00","value":62},{"datetime":"2021-01-15T15:00+08:00","value":62},{"datetime":"2021-01-15T16:00+08:00","value":63},{"datetime":"2021-01-15T17:00+08:00","value":64},{"datetime":"2021-01-15T18:00+08:00","value":65},{"datetime":"2021-01-15T19:00+08:00","value":66},{"datetime":"2021-01-15T20:00+08:00","value":67}]}},"daily":{"status":"ok","astro":[{"date":"2021-01-14T00:00+08:00","sunrise":{"time":"06:53"},"sunset":{"time":"17:13"}}],"precipitation":[{"date":"2021-01-14T00:00+08:00","max":0,"min":0,"avg":0}],"temperature":[{"date":"2021-01-14T00:00+08:00","max":16,"min":6,"avg":8.67}],"wind":[{"date":"2021-01-14T00:00+08:00","max":{"speed":16.82,"direction":169.2},"min":{"speed":0.72,"direction":0},"avg":{"speed":7.83,"direction":170.62}}],"humidity":[{"date":"2021-01-14T00:00+08:00","max":0.73,"min":0.2,"avg":0.69}],"cloudrate":[{"date":"2021-01-14T00:00+08:00","max":0.99,"min":0,"avg":0.21}],"pressure":[{"date":"2021-01-14T00:00+08:00","max":101967.82,"min":101520,"avg":101708.29}],"visibility":[{"date":"2021-01-14T00:00+08:00","max":24.13,"min":14.44,"avg":14.93}],"dswrf":[{"date":"2021-01-14T00:00+08:00","max":515.4,"min":0,"avg":0}],"air_quality":{"aqi":[{"date":"2021-01-14T00:00+08:00","max":{"chn":124,"usa":124},"avg":{"chn":69,"usa":69},"min":{"chn":67,"usa":67}}],"pm25":[{"date":"2021-01-14T00:00+08:00","max":94,"avg":48.67,"min":47}]},"skycon":[{"date":"2021-01-14T00:00+08:00","value":"PARTLY_CLOUDY_NIGHT"}],"skycon_08h_20h":[{"date":"2021-01-14T00:00+08:00","value":"PARTLY_CLOUDY_DAY"}],"skycon_20h_32h":[{"date":"2021-01-14T00:00+08:00","value":"CLEAR_NIGHT"}],"life_index":{"ultraviolet":[{"date":"2021-01-14T00:00+08:00","index":"2","desc":"弱"}],"carWashing":[{"date":"2021-01-14T00:00+08:00","index":"2","desc":"较适宜"}],"dressing":[{"date":"2021-01-14T00:00+08:00","index":"6","desc":"冷"}],"comfort":[{"date":"2021-01-14T00:00+08:00","index":"8","desc":"很冷"}],"coldRisk":[{"date":"2021-01-14T00:00+08:00","index":"4","desc":"极易发"}]}},"primary":0,"forecast_keypoint":"未来两小时不会下雨，放心出门吧"}}`
	err := json.Unmarshal([]byte(tmp), &weather)
	if err != nil {
		t.Fatal(err)
	}

	if weather.Status != "ok" {
		t.Fatal(`weather.Status != "ok"`)
	}
	t.Log(weather.Result.Minutely.Description)
	t.Log(weather.Result.Hourly.Description)
	t.Log(weather.Result.Hourly.Temperature)
	t.Log(weather.Result.ForecastKeypoint)
	t.Log(weather.Result.Daily.Astro)
}
